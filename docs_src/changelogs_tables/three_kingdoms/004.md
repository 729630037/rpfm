# 004

It contains the following changes:

- **New tables decoded**:
  - *audio_campaign_environment_reverb_junctions_tables*.
  - *audio_campaign_environment_reverb_types_tables*.
  - *audio_campaign_environment_reverbs_tables*.
  - *audio_campaign_environments_tables*.
  - *deployables_ability_to_invalid_usage_flags_tables*.
  - *deployables_to_disallowed_battle_types_tables*.
  - *frontend_characters_tables*.
  - *frontend_faction_to_frontend_faction_leaders_tables*.
  - *government_transition_mappings_tables*.
  - *ministerial_positions_to_government_types_tables*.
  - *pooled_resource_ui_colours_tables*.
  - *technology_category_ui_colours_tables*.
  - *ui_new_content_factions_tables*.
  - *ui_primary_faction_pooled_resources_tables*.

- **Updated Tables**:
  - ***advisors_tables***:
    - **New fields**:
      - ***optional_character_template***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *character_generation_templates*/*key*.
    - **Removed fields**:
      - *advisor_icon_path*.
  - ***agent_weighted_selection_to_subtype_sets_tables***:
    - **New fields**:
      - ***spawn_reason***:
        - **Type**: *StringU8*.
        - **Is Key**: *true*.
        - **Is Reference**: *agent_spawn_reason_enums*/*key*.
    - **Removed fields**:
      - *is_born*.
  - ***audio_campaign_buildings_tables***:
    - **New fields**:
      - ***reverb***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
      - ***obstruction***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***audio_campaign_environment_looping_sounds_tables***:
    - **New fields**:
      - ***reverb***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
      - ***obstruction***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***audio_campaign_stances_tables***:
    - **New fields**:
      - ***reverb***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
      - ***obstruction***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***audio_entity_types_tables***:
    - **New fields**:
      - ***charging_random_vocalisation***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *audio_entity_random_vocalisations*/*key*.
      - ***mounted_idle_random_sound***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *audio_entity_random_vocalisations*/*key*.
      - ***mounted_moving_random_sound***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *audio_entity_random_vocalisations*/*key*.
      - ***mounted_moving_fast_random_sound***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *audio_entity_random_vocalisations*/*key*.
      - ***mounted_stopping_random_sound***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *audio_entity_random_vocalisations*/*key*.
      - ***max_camera_distance***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
      - ***min_camera_distance***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
      - ***consider_moving***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
      - ***record_id***:
        - **Type**: *Long Integer*.
        - **Is Key**: *false*.
      - ***min_unit_focus_velocity***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
      - ***focus_pool***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *audio_entity_focus_pools*/*pool_name*.
    - **Removed fields**:
      - *should_use_unique_entity_switches*.
      - *max_unique_entity_switches*.
      - *max_camera_distance_for_focus*.
      - *min_camera_distance_for_focus*.
      - *unique_entity_switch*.
      - *ignore_moving_outside_combat*.
      - *ignore_moving*.
      - *group_idle_shoot*.
      - *group_idle_combat_ready*.
  - ***audio_markers_tables***:
    - **New fields**:
      - ***reverb***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
      - ***obstruction***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***audio_ui_categories_tables***:
    - **New fields**:
      - ***double_left_click***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
  - ***audio_vo_actors_tables***:
    - **New fields**:
      - ***fallback_actor***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *audio_vo_actors*/*key*.
        - **Description**: *If we don't have a dialogue event for this actor, use the fallback actor instead*.
  - ***battle_animations_table_allowed_combinations_tables***:
    - **New fields**:
      - ***secondary_weapon_animation***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *battle_animations_table*/*key*.
    - **Changed fields**:
      - **additional_animation**:
        - ***Type***: *StringU8* => *OptionalStringU8*.
        - ***Is Key***: *true* => *false*.
  - ***cai_diplomacy_deal_generation_condition_set_junctions_tables***:
    - **New fields**:
      - ***param_faction_key***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *factions*/*key*.
  - ***cai_personality_strategic_components_tables***:
    - **New fields**:
      - ***strategic_context_enemy_strength_ratio_lower_bound***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
      - ***strategic_context_enemy_strength_ratio_upper_bound***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
  - ***cai_variables_overides_tables***:
    - **New fields**:
      - ***round***:
        - **Type**: *Float*.
        - **Is Key**: *true*.
  - ***campaign_diplomacy_treaty_component_income_transfer_effects_tables***:
    - **New fields**:
      - ***regular_income_factor_percentage***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
      - ***varying_regular_income_factor_percentage***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
      - ***instant_income_factor_percentage***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
      - ***maximum_regular_income_transferred***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
      - ***maximum_varying_regular_income_transferred***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
      - ***maximum_instant_income_transferred***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
      - ***income_divided_by_num_of_subjects***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***campaign_group_post_battle_casualty_resources_tables***:
    - **New fields**:
      - ***resource_transaction_scope***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *pooled_resource_scopes*/*key*.
  - ***campaign_group_post_battle_result_resources_tables***:
    - **New fields**:
      - ***resource_transaction_scope***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *pooled_resource_scopes*/*key*.
  - ***campaign_public_order_populace_effects_tables***:
    - **New fields**:
      - ***group***:
        - **Type**: *StringU8*.
        - **Is Key**: *true*.
        - **Is Reference**: *campaign_groups*/*id*.
    - **Removed fields**:
      - *culture*.
  - ***campaign_ui_diplomatic_cco_states_tables***:
    - **New fields**:
      - ***icon_path***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
  - ***campaign_ui_diplomatic_states_tables***:
    - **Removed fields**:
      - *faction_fill_state*.
      - *faction_list_pip_state*.
      - *flag_style*.
  - ***campaigns_campaign_variables_junctions_tables***:
    - **New fields**:
      - ***round***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
  - ***ceos_to_equipment_variants_tables***:
    - **New fields**:
      - ***secondary_weapon_animation***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *battle_animations_table*/*key*.
  - ***character_generation_template_game_mode_details_tables***:
    - **New fields**:
      - ***is_deployable***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***character_generation_templates_tables***:
    - **Removed fields**:
      - *voiceover_actor_generals_speech*.
      - *voiceover_actor_diplomacy*.
  - ***deployables_abilities_tables***:
    - **New fields**:
      - ***ai_usage***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *battle_ai_abilities_usage_template_names*/*ai_ability_usage_template_key*.
      - ***wind_up_stance***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *special_ability_stances*/*key*.
  - ***deployables_tables***:
    - **New fields**:
      - ***ground_type_replacement***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *ground_types*/*type*.
        - **Description**: *Set the ground type to replace under this deployable*.
      - ***battlefield_building***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *battlefield_buildings*/*key*.
        - **Description**: *Allow the placement of actual buildings. Note: experimental. Things with hard collision won't work. Platforms are untested*.
      - ***capture_radius***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
        - **Description**: *If there is a building specified then we can add a capture point to it by specifying a radius. If -1 or no battlefield building, then none will be added.*.
      - ***fire_update_frequency***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
      - ***minimum_placement_distance***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
        - **Description**: *The minimum distance this deployable must be from another to be deployed*.
      - ***ground_type_replacement_radius_mod***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
        - **Description**: *This modifier will be multiplied by the radius of the deployable soft collision to come up with an area with which we do the intersection test for the ground type replacement. Should be > 1 if you want to apply stat effects in proximity of the deployable*.
      - ***hiding_scalar***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
        - **Description**: *This value will be used to modify the distance required to spot this deployable. < 1.0 and you will need to get closer > 1.0 and you can spot from further away*.
    - **Removed fields**:
      - *custom_battle_enabled*.
  - ***dynamic_loading_screen_starting_faction_events_tables***:
    - **New fields**:
      - ***campaign_key***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *campaigns*/*campaign_name*.
  - ***faction_groups_tables***:
    - **Removed fields**:
      - *character_selection_background*.
      - *campaign_selection_background*.
      - *campaign_selection_midground*.
      - *campaign_selection_foreground*.
  - ***frontend_campaign_selection_map_pins_tables***:
    - **New fields**:
      - ***frontend_character***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *frontend_characters*/*key*.
    - **Removed fields**:
      - *allied_map_image*.
      - *enemy_map_image*.
      - *owned_map_image*.
      - *character_generation_template*.
  - ***frontend_faction_leader_playstyles_tables***:
    - **Removed fields**:
      - *frontend_faction_leader_key*.
      - *localised_title*.
  - ***frontend_faction_leader_unique_characters_tables***:
    - **New fields**:
      - ***frontend_character***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *frontend_characters*/*key*.
    - **Removed fields**:
      - *portrait_path*.
      - *character_generation_template*.
      - *faction_record*.
  - ***frontend_faction_leaders_tables***:
    - **New fields**:
      - ***frontend_character***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *frontend_characters*/*key*.
      - ***starting_progression_level***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *campaign_progression_level_details*/*key*.
    - **Changed fields**:
      - **prelude_battle**:
        - ***Description***: *Specify if this character has a optional prelude battle can play before campaign* => *The path to the defeat screen image*.
    - **Removed fields**:
      - *uniform*.
      - *x_offset*.
      - *y_offset*.
      - *chinese_icon_path*.
      - *character_generation_template*.
      - *specialisation_effect_bundle*.
      - *map_path*.
      - *faction_leader_general_type*.
  - ***frontend_faction_leaders_to_frontend_campaign_selection_map_pins_junctions_tables***:
    - **New fields**:
      - ***campaign_key***:
        - **Type**: *StringU8*.
        - **Is Key**: *true*.
        - **Is Reference**: *campaigns*/*campaign_name*.
    - **Removed fields**:
      - *junction_type*.
  - ***frontend_faction_map_relationships_tables***:
    - **New fields**:
      - ***campaign_key***:
        - **Type**: *StringU8*.
        - **Is Key**: *true*.
        - **Is Reference**: *campaigns*/*campaign_name*.
    - **Removed fields**:
      - *campaign_map_playable_area*.
  - ***frontend_factions_tables***:
    - **New fields**:
      - ***active_years_start***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
      - ***active_years_end***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
      - ***playstyle***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *frontend_faction_leader_playstyles*/*frontend_faction_leader_playstyles*.
    - **Changed fields**:
      - **sort_order**:
        - ***Description***: ** => *the sort order of this faction per group on the frontend*.
    - **Removed fields**:
      - *video*.
  - ***loyalty_factors_tables***:
    - **New fields**:
      - ***data_driven_factor_requires_ceo_equipped_in_set***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *ceo_sets*/*key*.
  - ***main_units_tables***:
    - **New fields**:
      - ***adc_plays_as_conversation***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
    - **Removed fields**:
      - *voiceover_actor_group_battle_conversation*.
  - ***ministerial_positions_culture_details_tables***:
    - **New fields**:
      - ***allow_character_to_factionwide_ministerial_alternative_effects***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***ministerial_positions_tables***:
    - **Removed fields**:
      - *requires_world_leader*.
  - ***models_deployables_tables***:
    - **New fields**:
      - ***collision_file***:
        - **Type**: *StringU8*.
        - **Is Key**: *false*.
  - ***new_content_alerts_tables***:
    - **New fields**:
      - ***release_order***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
        - **Description**: *Id for when released. Only most recent is shown to player, but can have multiple with same field in which case show order field determines order shown in*.
      - ***optional_dlc_link***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *pdlc*/*id*.
    - **Changed fields**:
      - **show_order**:
        - ***Description***: ** => *When have multiple entries with same release order determines which shown first*.
    - **Removed fields**:
      - *header*.
  - ***pdlc_tables***:
    - **New fields**:
      - ***optional_dlc_icon***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
  - ***pooled_resources_tables***:
    - **New fields**:
      - ***shared***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
    - **Removed fields**:
      - *faction_specific*.
  - ***projectiles_explosions_tables***:
    - **New fields**:
      - ***ground_spread***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***projectiles_tables***:
    - **New fields**:
      - ***spawn_deployable_on_impact***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *false*.
        - **Is Reference**: *deployables*/*key*.
        - **Description**: *Specify a deployable to spawn when this projectile collides with the ground*.
  - ***retinue_slot_initial_units_tables***:
    - **New fields**:
      - ***campaign***:
        - **Type**: *OptionalStringU8*.
        - **Is Key**: *true*.
        - **Is Reference**: *campaigns*/*campaign_name*.
  - ***technology_node_sets_tables***:
    - **Removed fields**:
      - *colour_r*.
      - *colour_g*.
      - *colour_b*.
  - ***ui_ministerial_positions_tables***:
    - **Removed fields**:
      - *input_type*.
      - *set_record*.
      - *set_order*.
  - ***ui_resource_transaction_pooled_resource_junctions_tables***:
    - **New fields**:
      - ***hide_in_ui***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
  - ***unit_special_abilities_tables***:
    - **New fields**:
      - ***hp_cost_is_percentage***:
        - **Type**: *Boolean*.
        - **Is Key**: *false*.
        - **Description**: *This will delay adding the vortex until a number of seconds after the ability is activated.*.
      - ***hp_cost***:
        - **Type**: *Integer*.
        - **Is Key**: *false*.
        - **Description**: *Absolute/Percentage hp the caster will lose if this ability is triggered, scales with unit_size if absolute. Check the hp_cost_is_percentage field is updated when setting this. Will be capped at 99 if percentage based*.
      - ***vortex_spawn_delay***:
        - **Type**: *Float*.
        - **Is Key**: *false*.
        - **Description**: *This will delay adding the vortex until a number of seconds after the ability is activated.*.

